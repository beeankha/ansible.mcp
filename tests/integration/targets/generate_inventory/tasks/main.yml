---
- name: Create temporary file for inventory
  ansible.builtin.tempfile:
    suffix: "inventory.yml"
  register: tmp_inventory

- name: Set variable to the inventory file
  ansible.builtin.set_fact:
    generate_inventory_file_path: "{{ tmp_inventory.path }}"

- name: Generate inventory file in the expected location
  ansible.builtin.template:
    src: inventory.yml.j2
    dest: "{{ generate_inventory_file_path }}"
